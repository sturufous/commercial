<!--
  Generated template for the ExaminationPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <div class="header-title">
      <ion-title>{{ sharedData.client.get('givenName').value }} {{ sharedData.client.get('surname').value }}</ion-title>
    </div>
    <div style="float: right">
      <button ion-button icon-only clear>
        <ion-badge item-end secondary>
          {{ sharedData.examRevision }}
        </ion-badge>
        <ion-icon class="header-badge" name="md-reverse-camera"></ion-icon>
      </button>
      <button ion-button icon-only clear>
        <ion-badge item-end secondary>
          {{ sharedData.licenseClass }}
        </ion-badge>
        <ion-icon class="header-badge" name="md-bus"></ion-icon>
      </button>
      <button ion-button icon-only clear>
        <ion-badge item-end [ngClass]="sharedData.badgeColor(sharedData.getTotalDemeritCount())">
          {{ sharedData.getTotalDemeritCount() }}
        </ion-badge>
        <ion-icon name="notifications" class="header-badge"></ion-icon>
      </button>
    </div>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-fab bottom right>
    <button ion-fab (click)="saveCurrentExam()" color="primary"><ion-icon name="md-bookmark" color="light" style="font-size:24pt"></ion-icon></button>
  </ion-fab>
  <ion-list class="page-header card-corners">
    <ion-item class="item-trns" style="border: 0">
      <ion-avatar item-start>
        <img src="../assets/imgs/truck1.png">
      </ion-avatar>
      <h1>Examination</h1>
    </ion-item>
  </ion-list>

  <ion-card>
     <ion-list>
      <ion-item style="border-bottom:1px solid #DDD;padding-left:10px">
        Please fill out all mandatory fields
      </ion-item>
      <ion-item>
        <ion-icon  style="color:red" name="ios-bulb"></ion-icon>
          <span style="color:red">This is your message of the day.</span>
      </ion-item>
    </ion-list>
  </ion-card>

  <div class="spacer" style="width: 748px; height: 15px;"></div>
  
  <ion-card>
  <ion-list>
    <ion-item-divider color="light"><h2>INFRACTION SUMMARY</h2></ion-item-divider>
    <ion-item>
      <div>
        <ion-grid>
          <ion-row>
            <ion-col col-1>
              <ion-icon name="md-arrow-dropleft-circle"></ion-icon>
            </ion-col>
            <ion-col col-10 class="infraction-link" (click)="presentLeftTurn()">
              LEFT TURN
            </ion-col>
            <ion-col col-1>
              <span class="demerit-circle" [ngClass]="sharedData.badgeColor(sharedData.leftTurn.infractions.length)" (click)="hideDemerits.leftTurn=!hideDemerits.leftTurn">{{ sharedData.getDemeritCount(sharedData.leftTurn) }}</span>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <ion-card [hidden]="hideDemerits.leftTurn || sharedData.leftTurn.length == 0">
          <ion-card-content>
            <ion-list>
              <div class="card-header">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5><ion-icon name="md-list" class="icon-light"></ion-icon>Item</ion-col>
                    <ion-col col-4><ion-icon name="md-time" class="icon-light"></ion-icon>Time</ion-col>
                    <ion-col col-3><ion-icon name="md-sad" class="icon-light"></ion-icon>Demerits</ion-col>
                  </ion-row>
                </ion-grid>
              </div>
              <ion-item-sliding *ngFor="let item of sharedData.leftTurn.infractions">
                <ion-item (click)="presentDemerits(item)">
                  <ion-grid>
                    <ion-row>
                      <ion-col col-5>{{ item.value }}</ion-col>
                      <ion-col col-4>{{ item.time | date: 'mediumTime' }}</ion-col>
                      <ion-col col-3>{{ item.demerits }} Points</ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-item>
                <ion-item-options side="right">
                    <button ion-button color="danger" (click)="deleteInfraction(item, sharedData.leftTurn.infractions)">Delete</button>
                </ion-item-options>
              </ion-item-sliding>
              <ion-item>
                  <ion-textarea [(ngModel)]="sharedData.leftTurn.notes" placeholder="Enter the comments"></ion-textarea>
              </ion-item>              
            </ion-list>
          </ion-card-content>
        </ion-card>
    </ion-item>


    <ion-item>
      <div>
        <ion-grid>
          <ion-row>
            <ion-col col-1>
              <ion-icon name="md-arrow-dropright-circle"></ion-icon>
            </ion-col>
            <ion-col col-10 class="infraction-link" (click)="presentRightTurn()">
              RIGHT TURN
            </ion-col>
            <ion-col col-1>
              <span class="demerit-circle" [ngClass]="sharedData.badgeColor(sharedData.rightTurn.infractions.length)" (click)="hideDemerits.rightTurn=!hideDemerits.rightTurn">{{ sharedData.getDemeritCount(sharedData.rightTurn) }}</span>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <ion-card [hidden]="hideDemerits.rightTurn || sharedData.rightTurn.length == 0">
        <ion-card-content>
          <ion-list>
            <div class="card-header">
              <ion-grid>
                <ion-row>
                  <ion-col col-5><ion-icon name="md-list" class="icon-light"></ion-icon>Item</ion-col>
                  <ion-col col-4><ion-icon name="md-time" class="icon-light"></ion-icon>Time</ion-col>
                  <ion-col col-3><ion-icon name="md-sad" class="icon-light"></ion-icon>Demerits</ion-col>
                </ion-row>
              </ion-grid>
            </div>
            <ion-item-sliding *ngFor="let item of sharedData.rightTurn.infractions">
              <ion-item (click)="presentDemerits(item)">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5>{{ item.value }}</ion-col>
                    <ion-col col-4>{{ item.time | date: 'mediumTime' }}</ion-col>
                    <ion-col col-3>{{ item.demerits }} Points</ion-col>
                  </ion-row>
                </ion-grid>
              </ion-item>
              <ion-item-options side="right">
                  <button ion-button color="danger" (click)="deleteInfraction(item, sharedData.rightTurn.infractions)">Delete</button>
              </ion-item-options>
            </ion-item-sliding>
            <ion-item>
                <ion-textarea [(ngModel)]="sharedData.rightTurn.notes" placeholder="Enter the comments"></ion-textarea>
            </ion-item>              
        </ion-list>
        </ion-card-content>
      </ion-card>
    </ion-item>

    <ion-item>
      <div>
        <ion-grid>
          <ion-row>
            <ion-col col-1>
              <ion-icon name="md-eye"></ion-icon>
            </ion-col>
            <ion-col col-10 class="infraction-link" (click)="presentRoadPosition()">
              ROAD POSITION
            </ion-col>
            <ion-col col-1>
              <span class="demerit-circle" [ngClass]="sharedData.badgeColor(sharedData.roadPosition.infractions.length)" (click)="hideDemerits.roadPosition=!hideDemerits.roadPosition">{{ sharedData.getDemeritCount(sharedData.roadPosition) }}</span>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <ion-card [hidden]="hideDemerits.roadPosition || sharedData.roadPosition.length == 0">
        <ion-card-content>
          <ion-list>
            <div class="card-header">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5><ion-icon name="md-list" class="icon-light"></ion-icon>Item</ion-col>
                    <ion-col col-4><ion-icon name="md-time" class="icon-light"></ion-icon>Time</ion-col>
                    <ion-col col-3><ion-icon name="md-sad" class="icon-light"></ion-icon>Demerits</ion-col>
                  </ion-row>
                </ion-grid>
              </div>
              <ion-item-sliding *ngFor="let item of sharedData.roadPosition.infractions">
              <ion-item (click)="presentDemerits(item)">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5>{{ item.value }}</ion-col>
                    <ion-col col-4>{{ item.time | date: 'mediumTime' }}</ion-col>
                    <ion-col col-3>{{ item.demerits }} Points</ion-col>
                  </ion-row>
                </ion-grid>
              </ion-item>
              <ion-item-options side="right">
                  <button ion-button color="danger" (click)="deleteInfraction(item, sharedData.roadPosition.infractions)">Delete</button>
              </ion-item-options>
            </ion-item-sliding>
            <ion-item>
                <ion-textarea [(ngModel)]="sharedData.roadPosition.notes" placeholder="Enter the comments"></ion-textarea>
            </ion-item>              
        </ion-list>
        </ion-card-content>
      </ion-card>
    </ion-item>

    <ion-item>
      <div>
        <ion-grid>
          <ion-row>
            <ion-col col-1>
              <ion-icon name="ios-speedometer"></ion-icon>
            </ion-col>
            <ion-col col-10 class="infraction-link" (click)="presentSpeed()">
              SPEED
            </ion-col>
            <ion-col col-1>
              <span class="demerit-circle" [ngClass]="sharedData.badgeColor(sharedData.speed.infractions.length)" (click)="hideDemerits.speed=!hideDemerits.speed">{{ sharedData.getDemeritCount(sharedData.speed) }}</span>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <ion-card [hidden]="hideDemerits.speed || sharedData.speed.length == 0">
        <ion-card-content>
          <ion-list>
            <div class="card-header">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5><ion-icon name="md-list" class="icon-light"></ion-icon>Item</ion-col>
                    <ion-col col-4><ion-icon name="md-time" class="icon-light"></ion-icon>Time</ion-col>
                    <ion-col col-3><ion-icon name="md-sad" class="icon-light"></ion-icon>Demerits</ion-col>
                  </ion-row>
                </ion-grid>
              </div>
              <ion-item-sliding *ngFor="let item of sharedData.speed.infractions">
              <ion-item (click)="presentDemerits(item)">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5>{{ item.value }}</ion-col>
                    <ion-col col-4>{{ item.time | date: 'mediumTime' }}</ion-col>
                    <ion-col col-3>{{ item.demerits }} Points</ion-col>
                  </ion-row>
                </ion-grid>
              </ion-item>
              <ion-item-options side="right">
                  <button ion-button color="danger" (click)="deleteInfraction(item, sharedData.speed.infractions)">Delete</button>
              </ion-item-options>
            </ion-item-sliding>
            <ion-item>
                <ion-textarea [(ngModel)]="sharedData.speed.notes" placeholder="Enter the comments"></ion-textarea>
            </ion-item>              
        </ion-list>
        </ion-card-content>
      </ion-card>    
    </ion-item>

    <ion-item>
      <div>
        <ion-grid>
          <ion-row>
            <ion-col col-1>
              <ion-icon name="md-rewind"></ion-icon>
            </ion-col>
            <ion-col col-10 class="infraction-link" (click)="presentBacking()">
              BACKING
            </ion-col>
            <ion-col col-1>
              <span class="demerit-circle" [ngClass]="sharedData.badgeColor(sharedData.backing.infractions.length)" (click)="hideDemerits.backing=!hideDemerits.backing">{{ sharedData.getDemeritCount(sharedData.backing) }}</span>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <ion-card [hidden]="hideDemerits.backing || sharedData.backing.length == 0">
        <ion-card-content>
          <ion-list>
            <div class="card-header">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5><ion-icon name="md-list" class="icon-light"></ion-icon>Item</ion-col>
                    <ion-col col-4><ion-icon name="md-time" class="icon-light"></ion-icon>Time</ion-col>
                    <ion-col col-3><ion-icon name="md-sad" class="icon-light"></ion-icon>Demerits</ion-col>
                  </ion-row>
                </ion-grid>
              </div>
              <ion-item-sliding *ngFor="let item of sharedData.backing.infractions">
              <ion-item (click)="presentDemerits(item)">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5>{{ item.value }}</ion-col>
                    <ion-col col-4>{{ item.time | date: 'mediumTime' }}</ion-col>
                    <ion-col col-3>{{ item.demerits }} Points</ion-col>
                  </ion-row>
                </ion-grid>
              </ion-item>
              <ion-item-options side="right">
                  <button ion-button color="danger" (click)="deleteInfraction(item, sharedData.backing.infractions)">Delete</button>
              </ion-item-options>
            </ion-item-sliding>
            <ion-item>
              <ion-textarea [(ngModel)]="sharedData.backing.notes" placeholder="Enter the comments"></ion-textarea>
            </ion-item>              
        </ion-list>
        </ion-card-content>
      </ion-card>   
    </ion-item>

    <ion-item>
      <div>
        <ion-grid>
          <ion-row>
            <ion-col col-1>
              <ion-icon name="ios-cog"></ion-icon>
            </ion-col>
            <ion-col col-10 class="infraction-link" (click)="presentShifting()">
              SHIFTING
            </ion-col>
            <ion-col col-1>
              <span class="demerit-circle" [ngClass]="sharedData.badgeColor(sharedData.shifting.infractions.length)" (click)="hideDemerits.shifting=!hideDemerits.shifting">{{ sharedData.getDemeritCount(sharedData.shifting) }}</span>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <ion-card [hidden]="hideDemerits.shifting || sharedData.shifting.length == 0">
        <ion-card-content>
          <ion-list>
            <div class="card-header">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5><ion-icon name="md-list" class="icon-light"></ion-icon>Item</ion-col>
                    <ion-col col-4><ion-icon name="md-time" class="icon-light"></ion-icon>Time</ion-col>
                    <ion-col col-3><ion-icon name="md-sad" class="icon-light"></ion-icon>Demerits</ion-col>
                  </ion-row>
                </ion-grid>
              </div>
              <ion-item-sliding *ngFor="let item of sharedData.shifting.infractions">
              <ion-item (click)="presentDemerits(item)">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5>{{ item.value }}</ion-col>
                    <ion-col col-4>{{ item.time | date: 'mediumTime' }}</ion-col>
                    <ion-col col-3>{{ item.demerits }} Points</ion-col>
                  </ion-row>
                </ion-grid>
              </ion-item>
              <ion-item-options side="right">
                  <button ion-button color="danger" (click)="deleteInfraction(item, sharedData.shifting.infractions)">Delete</button>
              </ion-item-options>
            </ion-item-sliding>
            <ion-item>
              <ion-textarea [(ngModel)]="sharedData.shifting.notes" placeholder="Enter the comments"></ion-textarea>
            </ion-item>              
        </ion-list>
        </ion-card-content>
      </ion-card>   
    </ion-item>

    <ion-item>
      <div>
        <ion-grid>
          <ion-row>
            <ion-col col-1>
              <ion-icon name="md-hand"></ion-icon>
            </ion-col>
            <ion-col col-10 class="infraction-link" (click)="presentRightOfWay()">
              RIGHT OF WAY
            </ion-col>
            <ion-col col-1>
              <span class="demerit-circle" [ngClass]="sharedData.badgeColor(sharedData.rightOfWay.infractions.length)" (click)="hideDemerits.rightOfWay=!hideDemerits.rightOfWay">{{ sharedData.getDemeritCount(sharedData.rightOfWay) }}</span>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
  
      <ion-card [hidden]="hideDemerits.rightOfWay || sharedData.rightOfWay.length == 0">
        <ion-card-content>
          <ion-list>
              <div class="card-header">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5><ion-icon name="md-list" class="icon-light"></ion-icon>Item</ion-col>
                    <ion-col col-4><ion-icon name="md-time" class="icon-light"></ion-icon>Time</ion-col>
                    <ion-col col-3><ion-icon name="md-sad" class="icon-light"></ion-icon>Demerits</ion-col>
                  </ion-row>
                </ion-grid>
              </div>
              <ion-item-sliding *ngFor="let item of sharedData.rightOfWay.infractions">
              <ion-item (click)="presentDemerits(item)">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5>{{ item.value }}</ion-col>
                    <ion-col col-4>{{ item.time | date: 'mediumTime' }}</ion-col>
                    <ion-col col-3>{{ item.demerits }} Points</ion-col>
                  </ion-row>
                </ion-grid>
              </ion-item>
              <ion-item-options side="right">
                  <button ion-button color="danger" (click)="deleteInfraction(item, sharedData.rightOfWay.infractions)">Delete</button>
              </ion-item-options>
            </ion-item-sliding>
            <ion-item>
              <ion-textarea [(ngModel)]="sharedData.rightOfWay.notes" placeholder="Enter the comments"></ion-textarea>
            </ion-item>              
        </ion-list>
        </ion-card-content>
      </ion-card>   
    </ion-item>

    <ion-item>
      <div>
        <ion-grid>
          <ion-row>
            <ion-col col-1>
              <ion-icon name="md-unlock"></ion-icon>
            </ion-col>
            <ion-col col-10 class="infraction-link" (click)="presentUncoupling()">
              UNCOUPLING
            </ion-col>
            <ion-col col-1>
              <span class="demerit-circle" [ngClass]="sharedData.badgeColor(sharedData.uncoupling.infractions.length)" (click)="hideDemerits.uncoupling=!hideDemerits.uncoupling">{{ sharedData.getDemeritCount(sharedData.uncoupling) }}</span>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <ion-card [hidden]="hideDemerits.uncoupling || sharedData.uncoupling.length == 0">
        <ion-card-content>
          <ion-list>
            <div class="card-header">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5><ion-icon name="md-list" class="icon-light"></ion-icon>Item</ion-col>
                    <ion-col col-4><ion-icon name="md-time" class="icon-light"></ion-icon>Time</ion-col>
                    <ion-col col-3><ion-icon name="md-sad" class="icon-light"></ion-icon>Demerits</ion-col>
                  </ion-row>
                </ion-grid>
              </div>
              <ion-item-sliding *ngFor="let item of sharedData.uncoupling.infractions">
              <ion-item (click)="presentDemerits(item)">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5>{{ item.value }}</ion-col>
                    <ion-col col-4>{{ item.time | date: 'mediumTime' }}</ion-col>
                    <ion-col col-3>{{ item.demerits }} Points</ion-col>
                  </ion-row>
                </ion-grid>
              </ion-item>
              <ion-item-options side="right">
                  <button ion-button color="danger" (click)="deleteInfraction(item, sharedData.uncoupling.infractions)">Delete</button>
              </ion-item-options>
            </ion-item-sliding>
            <ion-item>
              <ion-textarea [(ngModel)]="sharedData.uncoupling.notes" placeholder="Enter the comments"></ion-textarea>
            </ion-item>              
        </ion-list>
        </ion-card-content>
      </ion-card>   
    </ion-item>

    <ion-item>
      <div>
        <ion-grid>
          <ion-row>
            <ion-col col-1>
              <ion-icon name="md-lock"></ion-icon>
            </ion-col>
            <ion-col col-10 class="infraction-link" (click)="presentCoupling()">
              COUPLING
            </ion-col>
            <ion-col col-1>
              <span class="demerit-circle" [ngClass]="sharedData.badgeColor(sharedData.coupling.infractions.length)" (click)="hideDemerits.coupling=!hideDemerits.coupling">{{ sharedData.getDemeritCount(sharedData.coupling) }}</span>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <ion-card [hidden]="hideDemerits.coupling || sharedData.coupling.length == 0">
        <ion-card-content>
          <ion-list>
            <div class="card-header">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5><ion-icon name="md-list" class="icon-light"></ion-icon>Item</ion-col>
                    <ion-col col-4><ion-icon name="md-time" class="icon-light"></ion-icon>Time</ion-col>
                    <ion-col col-3><ion-icon name="md-sad" class="icon-light"></ion-icon>Demerits</ion-col>
                  </ion-row>
                </ion-grid>
              </div>
              <ion-item-sliding *ngFor="let item of sharedData.coupling.infractions">
              <ion-item (click)="presentDemerits(item)">
                <ion-grid>
                  <ion-row>
                    <ion-col col-5>{{ item.value }}</ion-col>
                    <ion-col col-4>{{ item.time | date: 'mediumTime' }}</ion-col>
                    <ion-col col-3>{{ item.demerits }} Points</ion-col>
                  </ion-row>
                </ion-grid>
              </ion-item>
              <ion-item-options side="right">
                  <button ion-button color="danger" (click)="deleteInfraction(item, sharedData.coupling.infractions)">Delete</button>
              </ion-item-options>
            </ion-item-sliding>
            <ion-item>
              <ion-textarea [(ngModel)]="sharedData.coupling.notes" placeholder="Enter the comments"></ion-textarea>
            </ion-item>              
        </ion-list>
        </ion-card-content>
      </ion-card>   
    </ion-item>
  </ion-list>
  </ion-card>

<div class="spacer" style="width: 748px; height: 15px;"></div>

 <ion-card>
    <ion-item-divider color="light"><h2>EXAM RESULTS</h2></ion-item-divider>
      <ion-list>
        <form [formGroup]="sharedData.results">
          <ion-item>
            <ion-label floating>Qualified:</ion-label>
            <ion-select formControlName="qualified" type="text">
              <ion-option value="Yes">Yes</ion-option>
              <ion-option value="No">No</ion-option>
              <ion-option value="Discontinued">Discontinued</ion-option>
            </ion-select>
          </ion-item>
          <ion-item>
            <ion-label floating>Dangerous Action:</ion-label>
            <ion-input formControlName="dangerousAction" type="text"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label floating>Traffic Violation:</ion-label>
            <ion-input formControlName="trafficViolation" type="text"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label floating>Other (specify):</ion-label>
            <ion-input formControlName="other" type="text"></ion-input>
          </ion-item>
        </form>
      </ion-list>
  </ion-card>
    
</ion-content>
